@model UsuariosTi.Business.ViewModels.ViewModelComunicacao
@{
    ViewData["Title"] = "ListaComunicacao";
}

<div style="margin:6% 10%">
    <div class="card">
        <div class="card-header titulo-card-cor">
            <div class="row">
                <div class="col-md-4">
                    <a class="btn btn-secondary" href="/Home/Index" style="color: #fff !important;">Voltar</a>
                </div>
                <div class="col-md-4">
                    <h5 class="card-title text-center">Comunicação</h5>
                </div>
                <div class="col-md-4">
                    <a class="btn btn-primary" href="/Comunicacao/CadastroComunicacao" style="color: #fff !important;float: right;">Cadastrar</a>
                </div>
            </div>
        </div>

        <table class="table table-hover table-striped">
            <thead>
                <tr>
                    <th>Titulo</th>
                    <th>Descrição</th>
                    <th>Nome da Imagem</th>
                    <th>Data Inicio</th>
                    <th>Data Fim</th>
                    <th>Link</th>
                    <th style="width:5%;"></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.T039_DESTAQUEs)
                {
                    var descricao = item.T039_DESCRICAO.Length <= 50 ? item.T039_DESCRICAO : item.T039_DESCRICAO.Substring(0,50) + "...";
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.T039_TITULO)
                        </td>
                        <td title="@item.T039_DESCRICAO">
                            @descricao
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.T039_NOME_IMAGEM)
                        </td>
                        <td>
                            @String.Format("{0:dd/MM/yyyy}", @item.T039_DT_INICIO) 
                        </td>
                        <td>
                            @String.Format("{0:dd/MM/yyyy}", @item.T039_DT_FIM)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.T039_LINK)
                        </td>
                        <td style="text-align:center;width:5%;">
                            <a class="mr-1" asp-action="AlterarComunicacao" asp-route-idDestaque="@item.T039_DESTAQUE_ID">
                                <i class="fas fa-edit" style="color:#000bde;cursor:pointer;font-size:12pt;"></i>
                            </a>
                            <a href="/Comunicacao/DeleteComunicacao?id=@item.T039_DESTAQUE_ID">
                                <i class="fas fa-trash-alt" style="color:#a70000;cursor:pointer;font-size:12pt;"></i>
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section Scripts{
    <script>
        $(function () {
            $('.table').DataTable({
                language: {
                    sEmptyTable: "Nenhum registro encontrado",
                    sInfo: "Mostrando de _START_ até _END_ de _TOTAL_ registros",
                    sInfoEmpty: "Mostrando 0 até 0 de 0 registros",
                    sInfoFiltered: "(Filtrados de _MAX_ registros)",
                    sInfoPostFix: "",
                    sInfoThousands: ".",
                    sLengthMenu: "_MENU_ resultados por página",
                    sLoadingRecords: "Carregando...",
                    sProcessing: "Processando...",
                    sZeroRecords: "Nenhum registro encontrado",
                    sSearch: "Pesquisar",
                    oPaginate: {
                        sNext: "Próximo",
                        sPrevious: "Anterior",
                        sFirst: "Primeiro",
                        sLast: "Último"
                    },
                    oAria: {
                        sSortAscending: ": Ordenar colunas de forma ascendente",
                        sSortDescending: ": Ordenar colunas de forma descendente"
                    }
                },
                "scrollY": "555px",
                "scrollX": true,
                "paging": true,
                "ordering": true,
                "autoWidth": false,
                "columnDefs": [
                    { "width": "180px", "targets": 0 },
                    { "width": "700px", "targets": 1 },
                    { "width": "100px", "targets": 2 },
                    { "width": "70px", "targets": 3 },
                    { "width": "80px", "targets": 4 },
                ],
                dom: 'Bfrtip',
                buttons: [{
                    text: '<i class="img-excel-export fa fa-file-excel"></i>',
                    extend: 'excelHtml5',
                    autoFilter: true,
                    sheetName: 'Exported data'
                }]
            });
        })
    </script>
}
