@model UsuariosTi.Business.ViewModels.ViewModelT039_DESTAQUE

@{
    ViewData["Title"] = "AlterarComunicacao";
}


@using (Html.BeginForm("AlterarComunicacao", "Comunicacao", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

    <div class="container" style="position: absolute;top: 8%;left: 15%;border: 1px solid #6c757d;border-radius: 10px;">
        <div class="row" style="background-color: #6c757d; border-bottom: 1px solid #bfbfbf; padding: 10px; margin-bottom: 10px; color: #fff; border-top-left-radius: 10px;border-top-right-radius: 10px;font-size: 15pt;box-shadow: 0px 3px 5px #dcdcdc;">
            <div class="col">
                <label>Alterar Comunicação</label>
            </div>
        </div>
        <div class="form-horizontal">
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })

            <div class="form-row">
                <div class="form-group col-12">
                    <label class="control-label col-md-2">Titulo</label>
                    <input type="text" class="form-control" asp-for="@Model.T039_TITULO" value="@Model.T039_TITULO" id="T039_TITULO" required="required" />
                    <input type="hidden" asp-for="@Model.T039_DESTAQUE_ID" value="@Model.T039_DESTAQUE_ID" />
                </div>
            </div>

            <div class="form-row">
                <div class="form-group col-12">
                    <label class="control-label col-md-2">Descrição</label>
                    <textarea class="form-control" rows="3" asp-for="@Model.T039_DESCRICAO" value="@Model.T039_DESCRICAO" id="T039_DESCRICAO" required="required"></textarea>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group col">
                    <label class="control-label col-6">Data Inicio Informe</label>
                    <input type="text" class="form-control calendar" asp-for="@Model.T039_DT_INICIO" value="@Model.T039_DT_INICIO" id="T039_DT_INICIO" />
                </div>
                <div class="form-group col">
                    <label class="control-label col-6">Data Fim Informe</label>
                    <input type="text" class="form-control calendar" asp-for="@Model.T039_DT_FIM" value="@Model.T039_DT_FIM" id="T039_DT_FIM" />
                </div>
            </div>

            <div class="form-row">
                <div class="form-group col">
                    <label class="control-label">Imagem</label>
                    <input type="file" class="form-control" name="anexo" id="anexo" asp-for="@Model.anexo" value="@Model.T039_IMAGEM" />
                    @if (Model.T039_IMAGEM != null)
                    {
                        <div class="row pt-1">
                            <div class="col-12">
                                <input type="text" class="form-control-sm" value="@Model.T039_NOME_IMAGEM" style="background-color: #28a745; color: #fff;width: 100%;" disabled />
                            </div>
                            @*<div class="col-1 pl-0">
                                <a class="btn-sm btn-danger float-right" value="Download" onclick="te(@Model.T039_IMAGEM)">
                                    <i class="fas fa-download"></i>
                                </a>
                            </div>*@
                        </div>
                    }

                    @*<img id="img" style="width:100px" />*@
                </div>
                <div class="form-group col">
                    <label class="control-label">Link</label>
                    <input type="text" class="form-control" asp-for="@Model.T039_LINK" id="T039_LINK" value="@Model.T039_LINK" />
                </div>

            </div>
            <div class="form-row">
                <div class="form-group">
                    <input type="checkbox" class="validaEmail" name="email" /> Enviar e-mail
                    <input type="hidden" asp-for="T039_FLAG_EMAIL" value="@false" />
                </div>
            </div>

            <div id="boxEmail" class="form-row" style="display:none;">
                <div class="form-group col-12">
                    <label class="control-label">Para</label>
                    <input type="text" class="form-control" asp-for="@Model.T039_EMAILS" id="T039_EMAILS" placeholder="xxxxxxx@caixa.gov.br;" />
                    <label style="font-size: 8pt; font-style: italic;">Separação de Email por ";". Exemplo:   xxxxxxx@caixa.gov.br;xxxxxxx@caixa.gov.br;</label>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group col-12">
                    <input type="submit" value="Alterar" class="btn btn-primary float-right" />
                    <a class="btn btn-secondary float-left" asp-action="ListaComunicacao" style="color:#fff !important;">Voltar</a>
                </div>
            </div>

        </div>
    </div>
}

@section Scripts {
    <script src="~/Assets/Plugins/bootstrap-filestyle/bootstrap-filestyle.min.js"></script>
    <script>
        $(function () {

            $('.calendar').daterangepicker({
                "locale": {
                    "format": "DD/MM/YYYY",
                    "separator": " - ",
                    "applyLabel": "Aplicar",
                    "cancelLabel": "Cancelar",
                    "daysOfWeek": [
                        "Dom",
                        "Seg",
                        "Ter",
                        "Qua",
                        "Qui",
                        "Sex",
                        "Sab"
                    ],
                    "monthNames": [
                        "Janeiro",
                        "Fevereiro",
                        "Março",
                        "Abril",
                        "Maio",
                        "Junho",
                        "Julho",
                        "Agosto",
                        "Setembro",
                        "Outubro",
                        "Novembro",
                        "Dezembro"
                    ],
                    "firstDay": 1
                },
                singleDatePicker: true,
                autoUpdateInput: true,
                drops: "up"

            });


            $('#anexo').filestyle({
                buttonText: 'Arquivo',
                buttonName: 'btn-primary'
            });

            $('#toggleIcon').click(function () {
                var fs = $('#T039_IMAGEM');
                if (fs.filestyle('icon'))
                    fs.filestyle('icon', false);
                else
                    fs.filestyle('icon', true);
            });
            $(".buttonText").text("Arquivo");

            $("#anexo").change(function (index, valor) {
                var input = document.getElementById("anexo");
                var fReader = new FileReader();
                fReader.readAsDataURL(input.files[0]);
                fReader.onloadend = function (event) {
                    var img = document.getElementById("img");
                    img.src = event.target.result;
                }
            })

            $(".validaEmail").change(function () {
                if ($(this).prop("checked")) {
                    $("#boxEmail").css("display", "block");
                    $("#T039_FLAG_EMAIL").val(true);

                } else {
                    $("#boxEmail").css("display", "none");
                    $("#T039_EMAILS").val("");
                    $("#T039_FLAG_EMAIL").val(false);
                }
            });


        })


    </script>
}
